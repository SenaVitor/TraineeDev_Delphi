unit MinhasClasses;

interface

type
  TConta = class
  private
    FMensagem: String;
    FLimite, FSaldo: double;
  public
    constructor Create(ASaldo: Double = 0);
    destructor Destroy; override;
    property Mensagem: string read FMensagem write FMensagem;
    property Saldo: double read FSaldo write FSaldo;
    property Limite: double read FLimite write FLimite;
    function Sacar(Valor: Double): Boolean; virtual;
    function Depositar(Valor: Double): Boolean; virtual;
    function ConsultarSaldo(): Double; virtual;
  end;

  TContaCorrente = class(TConta)
  private
    FDesconto: double;
  public
    property Desconto: double read FDesconto write FDesconto;
    function Sacar(Valor: Double): Boolean; override;
  end;

  TContaPoupanca = class(TConta)
  private
    FValorMinimo: double;
  public
    property ValorMinimo: double read FValorMinimo write FValorMinimo;
    function Sacar(Valor: Double): Boolean; override;
    function Depositar(Valor: Double): Boolean; override;
  end;

implementation

{ TConta }

constructor TConta.Create(ASaldo: Double);
begin
  FSaldo := ASaldo;
end;

destructor TConta.Destroy;
begin
  inherited;
end;

function TConta.ConsultarSaldo: Double;
begin
    Result := FSaldo;
end;

function TConta.Depositar(Valor: Double): Boolean;
begin
  FSaldo := FSaldo + Valor;
  Result := true;
end;

function TConta.Sacar(Valor: Double): Boolean;
begin
  Result := false;
  if Valor <= FSaldo then
  begin
    FSaldo := FSaldo - Valor;
    Result := true;
  end
  else
  begin
    FMensagem := 'Saldo Insuficiente';
  end;
end;

{ TContaCorrente }

function TContaCorrente.Sacar(Valor: Double): Boolean;
var
  ValorTaxa: Double;
begin
  Result := false;
  FDesconto := Valor/100;
  ValorTaxa := Valor + FDesconto;
  if(Saldo < ValorTaxa) then
  begin
    Mensagem := 'Saldo Insuficiente';
    Exit;
  end;

  if(Valor <= 1000) then
  begin
    FSaldo := FSaldo - ValorTaxa;
    Result := true;
  end
  else
  begin
    Mensagem := 'O limite para saques na conta corrente é de 1000 reais';
  end;
end;

{ TContaPoupanca }

function TContaPoupanca.Depositar(Valor: Double): Boolean;
begin
  Result := false;
  if(Valor > 200) then
  begin
    inherited;
  end
  else
  begin
    Mensagem := 'O valor mínimo para depósitos na conta poupanã é de 200 reais';
  end;
end;

function TContaPoupanca.Sacar(Valor: Double): Boolean;
begin
  Result := false;
  if(FSaldo < Valor) then
  begin
    Mensagem := 'Saldo Insuficiente';
    Exit;
  end;

  if(Valor <= 500) then
  begin
    inherited;
  end
  else
  begin
    Mensagem := 'O limite para saques na conta poupança é de 500 reais';
  end;
end;

end.
